<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="sample">

	<select
		id="boardList" resultType="first.sample.vo.BoardVO">
			SELECT IDX, TITLE, HIT_CNT, CREA_DTM, CREA_ID
			FROM TB_BOARD 
			WHERE DEL_GB = 'N'
			ORDER BY IDX DESC
	</select>

	<insert id="insertBoard">
			INSERT INTO TB_BOARD 
			( TITLE, 
			CONTENTS, 
			HIT_CNT, 
			DEL_GB, 
			CREA_DTM, 
			CREA_ID ) 
			VALUES 
			( #{TITLE}, 
			#{CONTENTS}, 
			0, 
			'N', 
			SYSDATE(), 
			#{CREA_ID}
			)
	</insert>

	<update
		id="updateHitCnt"> 
			UPDATE TB_BOARD 
			SET HIT_CNT = ifnull(HIT_CNT, 0) + 1 
			WHERE IDX = #{IDX} 
	</update>
	
	<select
		id="selectBoardDetail" resultType="first.sample.vo.BoardVO">
		 	SELECT IDX, HIT_CNT, CREA_ID, CREA_DTM, TITLE, CONTENTS 
			 FROM TB_BOARD 
			 WHERE IDX = #{IDX} 
	</select>
	
	<select
		id="UpdateBoardDetail" resultType="first.sample.vo.BoardVO">
		 	SELECT IDX, HIT_CNT, CREA_ID, CREA_DTM, TITLE, CONTENTS 
			 FROM TB_BOARD 
			 WHERE IDX = #{iDX} 
	</select>
	
	<update
		id="updateBoard"> 
			UPDATE TB_BOARD 
			SET TITLE = #{TITLE},
			    CONTENTS = #{CONTENTS}
			WHERE IDX = #{IDX} 
	</update>
	
	<delete
		id="deleteBoard">  
			UPDATE TB_BOARD 
			SET DEL_GB = 'Y'
			WHERE IDX = #{IDX} 
	</delete>


</mapper>